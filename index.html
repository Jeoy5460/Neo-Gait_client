<!DOCTYPE html>
<!--
	Demonstration of the TI SensorTag JavaScript library.
-->
<html>

<head>
	<meta charset="utf-8" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="viewport" content="width=device-width, user-scalable=no
		initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />

	<title>IOTBOX </title>

	<style>
		//@import 'ui/css/evothings-app.css';
	</style>

	<script>
	// Redirect console.log to Evothings Workbench.
	if (window.hyper && window.hyper.log) { console.log = hyper.log }
	</script>
    <link rel="stylesheet" href="libs/jquery/jquery.mobile-1.4.5.min.css">
    <!--<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.css">-->
    <!--<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>-->
    <!--<script src="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.js"></script>-->

	<script src="cordova.js"></script>
    <script src="libs/jquery/jquery.js"></script>
	<script src="libs/jquery/jquery.mobile-1.4.5.min.js"></script>
	<script src="libs/evothings/evothings.js"></script>
    <script src="bletag.js"></script>
    <script src="libs/js/js.cookie.js"></script>
    <script src="libs/js/jquery-lang.js" charset="utf-8" type="text/javascript"></script>

</head>

<body>

<div data-role="page">
    <div data-role="header" data-position="fixed">
            <h1 lang="en" >IOTBOX</h1>
            <a href="#nav-panel" class="ui-btn-left " data-icon="bars" data-iconpos="notext">Menu</a>
    </div>

    <div data-role="panel" data-display="overlay" data-theme="b" id="nav-panel" >
            <ul data-role="listview">
                <li data-icon="delete"><a href="#" data-rel="close">v0.0.1</a></li>
                <li ><a href="scan.html" rel="external" lang="en">scan</a></li>
                <li ><a href="#setting" lang="en">setting</a></li>
            </ul>
    </div>
 
    <div data-role="content">
        <!--
        <img src="neo-gait.png"
        style="float:right;width:120px;height:auto;"/>

        <p>
        This is a program working with the <strong>EZFIND</strong>.
        </p>
        -->
        <div data-role="controlgroup" data-type="horizontal">
            <!--
            <button onclick="connect()" class="ui-btn green">
                Connect
            </button>

            <button onclick="disconnect()" class="charcoal">
                Disconnect
            </button>
            -->
            <button lang="en" onclick="bletag.ui.device_clean()" class="charcoal">
                Clean
            </button>

            <button lang="en" onclick="bletag.ui.device_find()" class="charcoal">
                Find
            </button>

            <button lang="en" onclick="bletag.ui.device_reset()" class="charcoal">
                Reset
            </button>

        </div>

<!--
        <p>
        Device model: <span id="DeviceModel">?</span><br />
        Firmware version: <span id="FirmwareData">?</span>
        </p>   
-->
		<p>
        <span lang="en">Message</span>: <span id="message">?</span><br/>
		</p>

        <p>
        <strong lang="en">Device List</strong><strong>:</strong> 
        <!--<span id="DeviceList">empty</span><br/>-->
        </p>

		<div id="DeviceList">
		</div>

    </div>

	</div>
	<div data-role="page" id="setting">
		<div data-role="header" data-position="fixed">
        <h1 lang="en">IOTBOX</h1>
            <a href="#"  data-icon="arrow-l" data-iconpos="notext" data-add-back-btn="true" data-rel="back">back</a>
		</div>

		<div data-role="content">
     <div id="langChanger"><a href="#" onclick="window.lang.change('en'); return false;">Switch to English</a> | <a href="#" onclick="window.lang.change('ch'); return false;">Switch to Chinese</a></div>

		</div>
    </div>


<script>
    jQuery(document).ready(function ()
    {

    });

	// Create language switcher instance
	var lang = new Lang();
	lang.dynamic('ch', 'libs/js/langpack/ch.json');
	lang.init({
		defaultLang: 'en'
        //currentLang: 'ch'
	});
	
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {
	navigator.globalization.getPreferredLanguage(
        function (language) {
            //console.log('language: ' + language.value + '\n');
            if (language.value === 'zh-CN'){
                window.lang.change('ch');
            }
        },
        function () {
            console.log('Error getting language\n');
        }
    );
}

</script>

</body>

</html>
